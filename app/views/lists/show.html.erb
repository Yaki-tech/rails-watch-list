<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="display-4"><%= @list.name %></h1>
    <%= link_to "Add a movie", new_list_bookmark_path(@list), class: "btn btn-primary" %>
  </div>

  <div class="row">
    <% @bookmarks.each do |bookmark| %>
      <div class="col-md-4 col-sm-6 mb-4">
        <div class="card h-100">
          <% if bookmark.movie.poster_url.present? %>
            <%= image_tag bookmark.movie.poster_url, class: "card-img-top", alt: bookmark.movie.title, style: "height: 400px; object-fit: cover;" %>
          <% else %>
            <div class="card-img-top bg-secondary d-flex align-items-center justify-content-center" style="height: 400px;">
              <i class="fas fa-film fa-3x text-white"></i>
            </div>
          <% end %>

          <div class="card-body d-flex flex-column">
            <h5 class="card-title"><%= bookmark.movie.title %></h5>
            <p class="card-text flex-grow-1"><%= truncate(bookmark.movie.overview, length: 150) %></p>

            <div class="mb-2">
              <strong>Rating:</strong>
              <span class="badge bg-warning text-dark">
                <%= bookmark.movie.rating %> / 10
              </span>
            </div>

            <% if bookmark.comment.present? %>
              <div class="mb-3">
                <strong>Comment:</strong>
                <p class="text-muted"><%= bookmark.comment %></p>
              </div>
            <% end %>

            <div class="mt-auto">
              <%= link_to bookmark_path(bookmark),
                  data: {
                    turbo_method: :delete,
                    turbo_confirm: "Are you sure you want to delete this bookmark?"
                  },
                  class: "text-danger text-decoration-none" do %>
                <i class="fas fa-trash-alt"></i> Delete
              <% end %>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <% if @bookmarks.empty? %>
    <div class="alert alert-info text-center">
      <p class="mb-3">No movies in this list yet.</p>
      <%= link_to "Add your first movie", new_list_bookmark_path(@list), class: "btn btn-primary" %>
    </div>
  <% end %>
</div>
